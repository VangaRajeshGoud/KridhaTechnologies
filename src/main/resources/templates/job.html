<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Listings</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .job-listing {
            background-color: #f8f9fa;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .job-title {
            font-size: 1.5em;
            color: #25ac82;
        }

        .job-location, .job-type {
            font-size: 1em;
            color: #6c757d;
        }

        .job-description {
            font-size: 1em;
            margin-top: 10px;
        }

        .apply-button {
            margin-top: 10px;
        }

        .apply-form {
            display: none;
            margin-top: 20px;
        }

        /* Additional styles */
        .bg-primary {
            background-color: #0b0a09 !important;
        }

        .bg-dark {
            background-color: #343a40 !important;
        }

        .text-secondary {
            color: #6c757d !important;
        }

        .text-primary {
            color: #7f1d22 !important;
            font-weight: 700 !important;
            box-sizing: border-box;
                unicode-bidi: isolate;

        }
        .btn-primary {
    color: #fff;
    background-color: #191615;
    border-color: #0d6efd;
}
    </style>
</head>

<body>
    <!-- Topbar Start -->
    <div class="container-fluid bg-secondary ps-5 pe-0 d-none d-lg-block">
        <div class="row gx-0">
            <div class="col-md-6 text-center text-lg-start mb-2 mb-lg-0">
                <div class="d-inline-flex align-items-center">
                    <a class="text-body py-2 pe-3 border-end" href=""><small>FAQs</small></a>
                    <a class="text-body py-2 px-3 border-end" href=""><small>Support</small></a>
                    <a class="text-body py-2 px-3 border-end" href=""><small>Privacy</small></a>
                    <a class="text-body py-2 px-3 border-end" href=""><small>Policy</small></a>
                    <a class="text-body py-2 ps-3" href=""><small>Career</small></a>
                </div>
            </div>
            <div class="col-md-6 text-center text-lg-end">
                <div class="position-relative d-inline-flex align-items-center bg-primary text-white top-shape px-5">
                    <div class="me-3 pe-3 border-end py-2">
                        <p class="m-0"><i class="fa fa-envelope-open me-2"></i>info@example.com</p>
                    </div>
                    <div class="py-2">
                        <p class="m-0"><i class="fa fa-phone-alt me-2"></i>+91-9160331952</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-white navbar-light shadow-sm px-5 py-3 py-lg-0">
       <!-- <a href="index.html" class="navbar-brand p-0">
			<img src="img\Kridhalogo.png" alt="Consult" class="me-2" style="width: 62px; height: 62px;">
            <h1 class="m-0 text-uppercase text-primary"></i>KRIDHA</h1>
        </a>-->
        
         <a href="index.html" class="navbar-brand p-0">
            <h1 class="m-0 text-uppercase text-primary">
    <img src="img\Kridhalogo.png" alt="Consult" class="me-2" style="width: 62px; height: 62px;">
    KRIDHA
</h1>

            
        </a>
        
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto py-0 me-n3">
                <a href="index.html" class="nav-item nav-link">Home</a>
                <a href="about.html" class="nav-item nav-link active">About</a>
                <a href="service.html" class="nav-item nav-link">Service</a>
                <a href="contact.html" class="nav-item nav-link">Contact</a>
                <a href="career.html" class="nav-item nav-link">Career</a>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->

    <div class="container">
        <h1 class="my-4">Available Job Listings</h1>
        <div id="jobsContainer"></div>

        <!-- Application Form -->
        <div id="applyForm" class="apply-form">
            <h2>Apply for Job</h2>
            <form id="jobApplicationForm">
                <input type="hidden" id="jobId" name="jobId">
                <div class="mb-3">
                    <label for="name" class="form-label">Name</label>
                    <input type="text" class="form-control" id="name" name="name" required>
                </div>
                <div class="mb-3">
                    <label for="phone" class="form-label">Phone Number</label>
                    <input type="tel" class="form-control" id="phone" name="phone" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="email" name="email" required>
                </div>
                <div class="mb-3">
                    <label for="skills" class="form-label">Skills</label>
                    <textarea class="form-control" id="skills" name="skills" rows="3" required></textarea>
                </div>
                <div class="mb-3">
                    <label for="resume" class="form-label">Resume</label>
                    <input type="file" class="form-control" id="resume" name="resume" accept=".pdf,.doc,.docx">
                </div>
                <button type="submit" class="btn btn-primary">Submit Application</button>
            </form>
        </div>
    </div>

    <div class="container-fluid bg-primary text-secondary p-5">
        <div class="row g-5">
            <div class="col-12 text-center">
                <h1 class="display-5 mb-4">Stay Updated!!!</h1>
                <form id="signupForm" class="mx-auto" style="max-width: 600px;">
                    <div class="input-group">
                        <input type="email" id="emailInput" class="form-control border-white p-3" placeholder="Your Email" required>
                        <button type="submit" class="btn btn-dark px-4">Sign Up</button>
                    </div>
                </form>
                <div id="responseMessage" class="mt-3"></div>
            </div>
        </div>
    </div>

    <div class="container-fluid bg-dark text-secondary p-5">
        <div class="row g-5">
            <div class="col-lg-3 col-md-6">
                <h3 class="text-white mb-4">Quick Links</h3>
                <div class="d-flex flex-column justify-content-start">
                    <a class="text-secondary mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Home</a>
                    <a class="text-secondary mb-2" href="/about.html"><i class="bi bi-arrow-right text-primary me-2"></i>About Us</a>
                    <a class="text-secondary mb-2" href="/service.html"><i class="bi bi-arrow-right text-primary me-2"></i>Our Services</a>
                    <a class="text-secondary" href="/contact.html"><i class="bi bi-arrow-right text-primary me-2"></i>Contact Us</a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <h3 class="text-white mb-4">Get In Touch</h3>
                <p class="mb-2"><i class="bi bi-geo-alt text-primary me-2"></i>123 Street, New York, USA</p>
                <p class="mb-2"><i class="bi bi-envelope-open text-primary me-2"></i>info@example.com</p>
                <p class="mb-0"><i class="bi bi-telephone text-primary me-2"></i>+91-91603319520</p>
            </div>
        </div>
    </div>

    <div class="container-fluid bg-dark text-secondary text-center border-top py-4 px-5" style="border-color: rgba(256, 256, 256, .1) !important;">
        <p class="m-0">&copy; <a class="text-secondary" href="#">Your Company</a>. All Rights Reserved.</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/api/jobs')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    const jobsContainer = document.getElementById('jobsContainer');
                    Object.keys(data).forEach(key => {
                        const job = data[key];
                        console.log(job); // Log each job object

                        const jobElement = document.createElement('div');
                        jobElement.className = 'job-listing';
                        jobElement.id = `job-${key}`;

                        jobElement.innerHTML = `
                            <div class="job-title">${job.title || 'Title not available'}</div>
                            <div class="job-location"><i class="fa fa-map-marker-alt"></i> ${job.location || 'Location not available'}</div>
                            <div class="job-type"><i class="fa fa-clock"></i> ${job.rolesResponsibilities || 'Type not available'}</div>
                            <div class="job-description">${job.description || 'Description not available'}</div>
                            <button class="apply-button btn btn-primary" data-job-id="${key}">Apply</button>
                        `;

                        jobElement.querySelector('.apply-button').addEventListener('click', function () {
                            // Hide all job listings
                            document.querySelectorAll('.job-listing').forEach(el => {
                                if (el.id !== `job-${key}`) {
                                    el.style.display = 'none';
                                }
                            });

                            // Show application form
                            const applyForm = document.getElementById('applyForm');
                            const jobIdInput = document.getElementById('jobId');
                            jobIdInput.value = key;
                            applyForm.style.display = 'block';
                        });

                        jobsContainer.appendChild(jobElement);
                    });
                })
                .catch(error => console.error('Fetch error:', error));

            // Handle form submission
            document.getElementById('jobApplicationForm').addEventListener('submit', function (event) {
                event.preventDefault();

                const formData = new FormData(this);

                fetch('/api/apply', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data); // Log the response
                    alert('Application submitted successfully');
                    document.getElementById('applyForm').style.display = 'none'; // Hide form after submission
                })
                .catch(error => console.error('Form submission error:', error));
            });

            // Handle sign-up form
            document.getElementById('signupForm').addEventListener('submit', function (event) {
                event.preventDefault();

                const email = document.getElementById('emailInput').value;

                fetch('/api/subscribe', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email })
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('responseMessage').innerText = 'Thank you for subscribing!';
                })
                .catch(error => console.error('Subscription error:', error));
            });
        });
    </script>
</body>

</html>
